(this["webpackJsonpbook-monkey"]=this["webpackJsonpbook-monkey"]||[]).push([[0],{33:function(e,t,n){e.exports={bookForm:"book-form_bookForm__3Y8b8"}},34:function(e,t,n){e.exports={btnContainer:"cart-buttons_btnContainer__2w4Vh"}},39:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);var c=n(1),i=n.n(c),s=n(31),a=n.n(s),r=(n(39),n(5)),o=n(3),l=n(11),b=n(10),u={cart:[]};function j(e,t){e.cart.sort((function(e,t){return Number(e.isbn)-Number(t.isbn)}));var n=e.cart.findIndex((function(e){return e.isbn===t.book.isbn}));switch(t.type){case"ADD_TO_CART":return Object(b.a)(Object(b.a)({},e),{},{cart:[].concat(Object(l.a)(e.cart),[t.book])});case"REMOVE_FROM_CART":return Object(b.a)(Object(b.a)({},e),{},{cart:e.cart.filter((function(e,t){return t!==n}))})}}var h=n(0),d=Object(c.createContext)({});d.displayName="Store";var O=function(){return Object(c.useContext)(d)};function m(e){var t=Object(c.useReducer)(j,u),n=Object(o.a)(t,2),i={store:n[0],dispatch:n[1]};return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(d.Provider,{value:i,children:e.children})})}var x=n(13),f=n.n(x),p=n(2);var v={isbn:"",title:"",authors:[""],published:"",subtitle:"",rating:0,thumbnails:[{url:"",title:""}],description:""};function g(e){var t=e.classAttr,n=Object(c.useState)([v]),i=Object(o.a)(n,2),s=i[0],a=i[1],r=Object(p.g)();function l(e){(e=e.trim())?function(e,t,n){var c}(f.a.get("https://api3.angular-buch.com/books/search/".concat(e)).then((function(e){console.log(e.data),a(e.data)}))):a([v])}return Object(h.jsxs)("div",{className:"ui search ".concat(t),children:[Object(h.jsxs)("div",{className:"ui icon input",children:[Object(h.jsx)("input",{type:"text",className:"prompt",onChange:function(e){l(e.target.value)}}),Object(h.jsx)("i",{className:"search icon"})]}),s[0]&&s[0].isbn&&Object(h.jsx)("div",{className:"results transition visible",children:s.map((function(e,t){return Object(h.jsxs)("div",{className:"result",onClick:function(){a([v]),r.push("/books/".concat(e.isbn))},children:[e.title,Object(h.jsx)("p",{className:"description",children:e.subtitle})]},t)}))})]})}function k(){var e=O().store.cart;return Object(h.jsxs)("nav",{className:"ui tabular menu",children:[Object(h.jsx)(r.c,{to:"/home",className:"item",children:"Home"}),Object(h.jsx)(r.c,{exact:!0,to:"/books",className:"item",children:"Books"}),Object(h.jsx)(r.c,{to:"/books/create",className:"item",children:"Add Book"}),Object(h.jsxs)(r.c,{to:"/cart",className:"ui item label",children:[Object(h.jsx)("i",{className:"shopping cart icon"}),e.length]}),Object(h.jsx)(g,{classAttr:"item right"})]})}function N(e){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(k,{}),Object(h.jsx)("div",{className:"ui container",children:e.children})]})}var C=n(17);function S(e,t,n){var c,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s="https://api3.angular-buch.com";c=f.a.interceptors.response.use((function(e){return e.data.published&&(e.data.published=new Date(e.data.published).toLocaleDateString()),e}),(function(e){return"Can't get Books",Promise.reject("Can't get Books")})),f()({url:"".concat(s).concat(t),method:e,data:i}).then((function(e){n(e.data)})).then((function(){f.a.interceptors.response.eject(c)})).catch((function(e){return console.log(e)}))}var y=n(33),w=n.n(y);function B(e){var t=e.initialState,n=e.isEdit,i=Object(p.g)(),s=function(e){var t=Object(c.useState)(e.isbn),n=Object(o.a)(t,2),i=n[0],s=n[1],a=Object(c.useState)(e.title),r=Object(o.a)(a,2),l=r[0],b=r[1],u=Object(c.useState)(e.authors),j=Object(o.a)(u,2),h=j[0],d=j[1],O=Object(c.useState)(e.published),m=Object(o.a)(O,2),x=m[0],f=m[1],p=Object(c.useState)(e.subtitle),v=Object(o.a)(p,2),g=v[0],k=v[1],N=Object(c.useState)(e.rating),C=Object(o.a)(N,2),S=C[0],y=C[1],w=Object(c.useState)(e.thumbnails),B=Object(o.a)(w,2),E=B[0],_=B[1],A=Object(c.useState)(e.description),F=Object(o.a)(A,2),D=F[0],R=F[1];return Object(c.useEffect)((function(){s(e.isbn),b(e.title),d(e.authors),f(e.published),k(e.subtitle),y(e.rating),_(e.thumbnails),R(e.description)}),[e]),[i,s,l,b,h,d,x,f,g,k,S,y,E,_,D,R]}(t),a=Object(o.a)(s,16),r=a[0],u=a[1],j=a[2],d=a[3],O=a[4],m=a[5],x=a[6],f=a[7],v=a[8],g=a[9],k=a[10],N=(a[11],a[12]),y=a[13],B=a[14],E=a[15],_="Isbn",A="Titel",F="Author",D="Published",R="subtitle",T={thumbnail:"Thumbnail",url:"url",title:"title"},M="Url",I="Description",L=function(){return{isbn:r,title:j,authors:O,published:x,subtitle:v,rating:k,thumbnails:N,description:B}},P=function(e,t,n,c){var i,s=Object(l.a)(O);switch(e){case _:u(t);break;case A:d(t);break;case F:s[n]=t,m(s);break;case D:f(t);break;case R:g(t);break;case T.thumbnail:N&&((i=Object(l.a)(N))[n]=Object(b.a)(Object(b.a)({},i[n]),{},Object(C.a)({},c,t)),y(i));break;case I:E(t)}},q=function(e){var t,n=Object(l.a)(O);switch(e){case F:n.push(""),m(n);break;case T.thumbnail:N&&((t=Object(l.a)(N)).push({url:"",title:""}),y(t))}},V=function(e){var t,n=Object(l.a)(O);switch(e){case F:n.length>1&&(n.pop(),m(n));break;case T.thumbnail:N&&(t=Object(l.a)(N)).length>1&&(t.pop(),y(t))}};return Object(h.jsxs)("form",{className:"ui form ".concat(w.a.bookForm),onSubmit:function(e){!function(e){e.preventDefault(),n?S("put","/book/".concat(r),(function(){i.push("/books/".concat(r))}),L()):S("post","/book",(function(){i.push("/books")}),L())}(e)},children:[Object(h.jsx)("label",{children:"Buchtitel "}),Object(h.jsx)("input",{placeholder:A,onChange:function(e){P(A,e.target.value,0,"")},value:j,required:!0}),Object(h.jsx)("label",{children:"Untertitel "}),Object(h.jsx)("input",{placeholder:R,onChange:function(e){P(R,e.target.value,0,"")},value:v}),Object(h.jsx)("label",{children:"Isbn"}),Object(h.jsx)("input",{placeholder:_,onChange:function(e){P(_,e.target.value,0,"")},value:r,pattern:"\\d{9,}",title:"mindestens 9-stellige Zahl",required:!0,readOnly:n}),Object(h.jsx)("label",{children:"Erscheinungsdatum "}),Object(h.jsx)("input",{placeholder:D,type:"date",onChange:function(e){P(D,e.target.value,0,"")},value:x,required:!0}),Object(h.jsx)("label",{children:"Authoren "}),Object(h.jsx)("button",{className:"ui mini button",type:"button",onClick:function(){q(F)},children:"+"}),Object(h.jsx)("button",{className:"ui mini button",type:"button",onClick:function(){V(F)},children:"-"}),Object(h.jsx)("div",{className:"fields",children:O.map((function(e,t){return Object(h.jsx)("div",{className:"sixteen wide field",children:Object(h.jsx)("input",{placeholder:F,onChange:function(e){P(F,e.target.value,t,"")},value:e,required:!0})},t)}))}),Object(h.jsx)("label",{children:"Beschreibung "}),Object(h.jsx)("textarea",{placeholder:I,onChange:function(e){P(I,e.target.value,0,"")},value:B,maxLength:3e3,minLength:5,title:"Mindestens 5 und maximal 3000 Zeichen"}),Object(h.jsx)("label",{children:"Bilder "}),Object(h.jsx)("button",{className:"ui mini button",type:"button",onClick:function(){q(T.thumbnail)},children:"+"}),Object(h.jsx)("button",{className:"ui mini button",type:"button",onClick:function(){V(T.thumbnail)},children:"-"}),N&&N.map((function(e,t){return Object(h.jsxs)("div",{className:"field",children:[Object(h.jsx)("input",{placeholder:M,type:"url",className:"nine wide field",onChange:function(e){P(T.thumbnail,e.target.value,t,T.url)},value:e.url}),Object(h.jsx)("input",{placeholder:A,className:"seven wide field",onChange:function(e){P(T.thumbnail,e.target.value,t,T.title)},value:e.title})]},t)})),Object(h.jsx)("button",{className:"ui button",children:"Submit"})]})}function E(){var e=v;return e.rating=~~(6*Math.random()),Object(h.jsx)(B,{initialState:e,isEdit:!1})}var _=function(){return Object(h.jsx)("div",{className:"ui container",children:Object(h.jsx)("div",{className:"ui active large text loader",children:"Loading"})})};function A(e,t){var n=Object(c.useState)(),i=Object(o.a)(n,2),s=i[0],a=i[1];return Object(c.useEffect)((function(){S(e,t,a)}),[e,t]),[s,a]}var F=n(34),D=n.n(F);function R(e){var t=e.book,n=O(),c=n.store.cart,i=n.dispatch;return Object(h.jsxs)("div",{className:"ui extra right floated content ".concat(D.a.btnContainer),children:[Object(h.jsxs)("div",{className:"ui label",children:[Object(h.jsx)("i",{className:"shopping cart icon"}),c.length&&c.filter((function(e){return e.isbn===t.isbn})).length]}),Object(h.jsx)("button",{className:"ui button",onClick:function(e){return function(e){e.preventDefault(),t&&i({type:"ADD_TO_CART",book:t})}(e)},children:"+"}),Object(h.jsx)("button",{className:"ui button",onClick:function(e){return function(e){e.preventDefault(),t&&i({type:"REMOVE_FROM_CART",book:t})}(e)},children:"-"})]})}var T=function(){var e=Object(p.h)().isbn,t=Object(p.g)(),n="/book/".concat(e),c=A("get",n),i=Object(o.a)(c,1)[0],s=function(){t.push("/books")};return Object(h.jsxs)(h.Fragment,{children:[i?Object(h.jsxs)("div",{children:[Object(h.jsx)("h1",{children:i.title}),Object(h.jsx)("p",{children:i.subtitle}),Object(h.jsx)("div",{className:"ui divider"}),Object(h.jsxs)("div",{className:"ui grid",children:[Object(h.jsxs)("div",{className:"four wide column",children:[Object(h.jsx)("h4",{children:"Autoren"}),i.authors.map((function(e,t){return Object(h.jsx)("p",{children:e},t)}))]}),Object(h.jsxs)("div",{className:"four wide column",children:[Object(h.jsx)("h4",{children:"ISBN"}),Object(h.jsx)("p",{children:i.isbn})]}),Object(h.jsxs)("div",{className:"four wide column",children:[Object(h.jsx)("h4",{children:"Erschienen"}),Object(h.jsx)("p",{children:"".concat(i.published)})]}),Object(h.jsxs)("div",{className:"four wide column",children:[Object(h.jsx)("h4",{children:"Rating"}),Object(h.jsx)("p",{children:function(){var e=[];if(i)for(var t=0;t<(i.rating||0);t++)e.push(t);return e}().map((function(e,t){return Object(h.jsx)("i",{className:"yellow star icon"},t)}))})]})]}),Object(h.jsx)("h4",{children:"Beschreibung"}),Object(h.jsx)("p",{children:i.description}),Object(h.jsx)("div",{className:"ui small images",children:i.thumbnails&&i.thumbnails.map((function(e,t){return Object(h.jsx)("img",{src:e.url,alt:e.title},t)}))}),Object(h.jsx)("button",{className:"ui red button",onClick:function(){confirm("You are about to delete this book?")&&S("delete",n,(function(){s()}))},children:"Delete book"}),Object(h.jsx)("button",{className:"ui yellow button",onClick:function(){t.push("/books/".concat(e,"/edit"))},children:"Edit book"}),Object(h.jsx)(R,{book:i})]}):Object(h.jsx)(_,{}),Object(h.jsx)("div",{className:"ui divider"}),Object(h.jsx)("button",{className:"ui blue button",onClick:s,children:"Back"})]})};function M(){var e=Object(p.h)().isbn,t=A("get","/book/".concat(e)),n=Object(o.a)(t,1)[0],c=v;if(n){var i=n.published.split("."),s=i.shift();Number(s)<10&&(s="0".concat(s));var a=i.shift();Number(a)<10&&(a="0".concat(a)),a&&i.push(a),s&&i.push(s);var r=i.join("-");(c=Object(b.a)({},n)).published=r}return Object(h.jsx)(B,{initialState:c,isEdit:!0})}function I(e){var t=Object(p.g)(),n=e.book;return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(r.b,{to:"/books/".concat(n.isbn),className:"item",children:[Object(h.jsx)("img",{className:"ui tiny image",alt:n.thumbnails&&n.thumbnails[0].title,src:n.thumbnails&&n.thumbnails[0].url,onClick:function(){t.push("/books/".concat(n.isbn))}}),Object(h.jsxs)("div",{className:"content",children:[Object(h.jsx)("div",{className:"header",children:n.title}),Object(h.jsx)("div",{className:"description",children:n.subtitle}),Object(h.jsxs)("div",{className:"metadata",children:[n.authors.map((function(e,t){return Object(h.jsxs)("span",{children:[e,t!==n.authors.length-1&&", "]},t)})),Object(h.jsx)("br",{}),n.isbn]})]}),e.children&&e.children]})})}function L(){var e=A("get","/books"),t=Object(o.a)(e,2),n=t[0],c=t[1],i=function(){S("get","/books",c)};return n?Object(h.jsx)("div",{className:"ui middle aligned selection divided list",children:n.length?n.map((function(e){return Object(h.jsx)(I,{book:e},e.isbn)})):Object(h.jsx)("div",{className:"ui item",children:Object(h.jsxs)("div",{className:"ui message",children:[Object(h.jsx)("p",{className:"ui content",children:"Keine B\xfccher im Regal vorhanden"}),Object(h.jsx)("button",{className:"ui black button",onClick:function(){S("delete","/books",i)},children:"Store zur\xfccksetzen"})]})})}):Object(h.jsx)(_,{})}function P(){var e=O().store.cart,t=function(){var t=[];return e.forEach((function(e,n){var c=!1;t.forEach((function(t){t.isbn===e.isbn&&(c=!0)})),c||t.push(e)})),t}();return Object(h.jsx)("div",{className:"ui middle aligned selection divided list",children:t.length?t.map((function(e){return Object(h.jsx)(I,{book:e,children:Object(h.jsx)(R,{book:e})},e.isbn)})):Object(h.jsx)("div",{className:"ui item",children:Object(h.jsxs)("div",{className:"ui message",children:[Object(h.jsx)("p",{className:"ui content",children:"Keine B\xfccher im Warenkorb vorhanden"}),Object(h.jsx)(r.b,{className:"ui black button",to:"/books",children:"Zum B\xfccherregal"})]})})})}function q(){return Object(h.jsxs)("div",{className:"ui center aligned header segment",children:[Object(h.jsx)("h1",{className:"ui ",children:" Willkommen bei BookMonkey "}),Object(h.jsx)(r.b,{className:"ui red button",to:"/books",children:"B\xfccher ansehen"}),Object(h.jsx)("br",{}),Object(h.jsx)("br",{}),Object(h.jsx)(g,{classAttr:""})]})}function V(){return Object(h.jsxs)(p.d,{children:[Object(h.jsx)(p.b,{exact:!0,path:"/books/create",children:Object(h.jsx)(E,{})}),Object(h.jsx)(p.b,{path:"/cart",children:Object(h.jsx)(P,{})}),Object(h.jsx)(p.b,{path:"/books/:isbn/edit",children:Object(h.jsx)(M,{})}),Object(h.jsx)(p.b,{path:"/books/:isbn",children:Object(h.jsx)(T,{})}),Object(h.jsx)(p.b,{path:"/books",children:Object(h.jsx)(L,{})}),Object(h.jsx)(p.b,{path:"/home",children:Object(h.jsx)(q,{})}),Object(h.jsx)(p.b,{path:"",children:Object(h.jsx)(p.a,{to:"/home"})})]})}var Z=function(){return Object(h.jsx)(r.a,{children:Object(h.jsx)(m,{children:Object(h.jsx)(N,{children:Object(h.jsx)(V,{})})})})},z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,65)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),c(e),i(e),s(e),a(e)}))};a.a.render(Object(h.jsx)(i.a.StrictMode,{children:Object(h.jsx)(Z,{})}),document.getElementById("root")),z()}},[[64,1,2]]]);
//# sourceMappingURL=main.7d70e6a4.chunk.js.map